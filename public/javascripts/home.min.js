/*! Copyright zmjdc.com 2014-04-30 */
(function() {
    z.Home = function() {
        function e() {
            this.listenSearch("#s"), this.$menuItems = $("#menu-items");
        }
        return e.prototype.listenSearch = function(e) {
            var that = this, $that = $(e);
            return $that.on("keyup", function(e) {
                var val = $that.val();
                if (!val) return !0;
                if (!val.match(/^(?:\s*)[a-zA-Z]+\s*$/)) {
                    val = val.slice(0, val.length - 1);
                    $that.val(val);
                    return !1;
                }
                return !0;
            }), $that.closest("form").on("submit", function(e) {
                var val = $that.val().trim();
                if (val === "") return false;
                try {
                    var n = "dc", dc = localStorage.getItem("dc");
                    dc ? localStorage.setItem(n, dc += "," + val) : localStorage.setItem(n, val);
                } catch (e) {}
            });
        }, e.prototype.autoComplete = function(val) {
            var that = this, d = null;
            try {
                var n = "dc";
                d = localStorage.getItem(n);
            } catch (e) {}
            if (d) {
                var b = d.split(",");
                return b.forEach(function(i, l) {
                    if (i.indexOf(val) === 0) return !0;
                });
            } else {}
            return [];
        }, e.prototype.resize = function() {
            this.$menuItems.removeClass("visible");
        }, e;
    }(), $(function() {
        return z.home = new z.Home(), z.resizeEventEmitter.add(600, z.home.resize);
    });
}).call(this);